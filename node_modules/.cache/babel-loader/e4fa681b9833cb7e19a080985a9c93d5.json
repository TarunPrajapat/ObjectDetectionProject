{"ast":null,"code":"import _toConsumableArray from \"E:\\\\self_checkout\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"E:\\\\self_checkout\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\self_checkout\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\self_checkout\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\self_checkout\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\self_checkout\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\self_checkout\\\\src\\\\containers\\\\App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Header from '../components/Header/Header';\nimport WebcamCapture from '../components/Webcam/Webcam';\nimport Groceries from '../components/Groceries/Groceries';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      groceriesArray: []\n    };\n\n    _this.deleteGroceryHandler = function (groceryIndex) {\n      // Arrays and objects are reference types.\n      // So need to call the spread operator (could alternately use the slice method),\n      // to get a copy of the persons array- rather than a pointer to the\n      // original array. Always update state in an immutable way.\n      var groceries = _toConsumableArray(_this.state.groceriesArray);\n\n      groceries.splice(groceryIndex, 1);\n\n      _this.setState({\n        groceries: groceries\n      });\n    };\n\n    _this.updateGroceryStateHandler = function (dataFromChild) {\n      var groceries = _toConsumableArray(_this.state.groceriesArray);\n\n      var totalGroceries = groceries.concat(dataFromChild); // This code can be cleaned up be good enough for now!\n      // each foreach loop should be contained within a function that can be reused.\n\n      var priceHolder = {};\n      totalGroceries.forEach(function (d) {\n        if (priceHolder.hasOwnProperty(d.name)) {\n          priceHolder[d.name] = priceHolder[d.name] + d.price;\n        } else {\n          priceHolder[d.name] = d.price;\n        }\n      });\n      var quantityHolder = {};\n      totalGroceries.forEach(function (d) {\n        if (quantityHolder.hasOwnProperty(d.name)) {\n          quantityHolder[d.name] = quantityHolder[d.name] + d.quantity;\n        } else {\n          quantityHolder[d.name] = d.quantity;\n        }\n      });\n      var finalGroceries = [];\n      var i = 1;\n\n      for (var prop in quantityHolder) {\n        finalGroceries.push({\n          name: prop,\n          price: Math.floor(priceHolder[prop] * 100) / 100,\n          quantity: quantityHolder[prop],\n          k: 1\n        });\n      }\n\n      _this.setState({\n        groceriesArray: finalGroceries\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App bx--grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bx--row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"bx--col-xs-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(WebcamCapture, {\n        callbackFromParent: this.updateGroceryStateHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"bx--col-xs-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Groceries, {\n        groceries: this.state.groceriesArray,\n        click: this.deleteGroceryHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["E:\\self_checkout\\src\\containers\\App.js"],"names":["React","Component","Header","WebcamCapture","Groceries","App","state","groceriesArray","deleteGroceryHandler","groceryIndex","groceries","splice","setState","updateGroceryStateHandler","dataFromChild","totalGroceries","concat","priceHolder","forEach","d","hasOwnProperty","name","price","quantityHolder","quantity","finalGroceries","i","prop","push","Math","floor","k"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nimport Header from '../components/Header/Header'\nimport WebcamCapture from '../components/Webcam/Webcam'\nimport Groceries from '../components/Groceries/Groceries'\n\n\nclass App extends Component {\n  state = {\n    groceriesArray: []\n  }\n\n  deleteGroceryHandler = (groceryIndex) => {\n    // Arrays and objects are reference types.\n    // So need to call the spread operator (could alternately use the slice method),\n    // to get a copy of the persons array- rather than a pointer to the\n    // original array. Always update state in an immutable way.\n    const groceries = [...this.state.groceriesArray];\n    groceries.splice(groceryIndex, 1);\n    this.setState({groceries: groceries});\n  }\n  \n  // Grovery data from backend. \n  // The Webcam component sends an Axios POST request to the backend which returns the detected groceries\n  // This data is passed to the state via the below callback, which the Webcam component executes.\n  updateGroceryStateHandler = (dataFromChild) => {\n    const groceries = [...this.state.groceriesArray];\n    const totalGroceries = groceries.concat(dataFromChild);\n    \n    // This code can be cleaned up be good enough for now!\n    // each foreach loop should be contained within a function that can be reused.\n    let priceHolder = {};\n    totalGroceries.forEach(function (d) {\n        if (priceHolder.hasOwnProperty(d.name)) {\n          priceHolder[d.name] = priceHolder[d.name] + d.price\n        } else {       \n          priceHolder[d.name] = d.price\n        }\n    });\n    \n    let quantityHolder = {};\n    totalGroceries.forEach(function (d) {\n      if (quantityHolder.hasOwnProperty(d.name)) {\n        quantityHolder[d.name] = quantityHolder[d.name] + d.quantity\n      } else {       \n        quantityHolder[d.name] = d.quantity\n      }\n    });\n\n    let finalGroceries = [];\n    let i=1;\n    for(let prop in quantityHolder) {\n      finalGroceries.push({name: prop, price: (Math.floor(priceHolder[prop] * 100) / 100 ), quantity: quantityHolder[prop],k:1});   \n    }\n\n    this.setState({groceriesArray: finalGroceries});\n  }\n\n  render() {\n\n    return (\n        <div className='App bx--grid'>\n          <Header/>\n          <div className='bx--row'>\n            <div className='bx--col-xs-6'>\n              <WebcamCapture \n              callbackFromParent={this.updateGroceryStateHandler}/>\n            </div>\n            <div className='bx--col-xs-6'>\n              <Groceries\n                groceries={this.state.groceriesArray} \n                click={this.deleteGroceryHandler}/>\n            </div>\n          </div>\n        </div>\n\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}